# 更新日志 (Changelog)

## [v0.2.0] - 2025-06-11

### 🎉 重大功能更新
- **文件上传支持**：全面支持图片、音频、PDF文件上传功能
  - 支持本地文件上传：通过本地文件路径上传文件（必须使用绝对路径）
  - 支持远程URL上传：直接通过URL上传网络文件
  - 智能文件类型检测和格式验证
  - 文件大小限制检查（图片50MB、音频200MB、PDF100MB）

### ✨ 新增功能
- **文件段落类型**：新增 `{"type": "file", "file_type": "image|audio|pdf", ...}` 段落类型
- **文件节点构建器**：新增 `NoteAtomBuilder` 的文件节点创建方法
  - `create_image()` - 创建图片节点
  - `create_audio()` - 创建音频节点  
  - `create_pdf()` - 创建PDF节点
- **增强的错误处理**：文件上传失败时显示清晰的错误信息和建议

### 🛠 技术改进
- **新增依赖**：添加 `aiofiles` 库支持异步文件操作
- **文件安全验证**：路径安全检查，防止目录遍历攻击
- **扩展名验证**：支持多种文件格式的扩展名检查
- **优化API客户端**：扩展 `MowenAPI` 类支持文件上传相关接口
- **增强参数验证**：更新 `validate_rich_note_paragraphs()` 支持文件段落验证

### 📚 文档更新
- 更新 README.md，添加文件上传功能的详细说明
- 新增《文件上传功能设计文档.md》技术设计文档
- 更新工具描述，包含完整的文件段落格式说明
- 新增文件上传使用示例和最佳实践

### 🔧 配置更新
- 更新 `pyproject.toml`，版本号升级到 v0.2.0
- 添加文件处理相关依赖到项目配置
- 更新项目描述，突出文件上传功能

## [v1.0.1] - 2025-06-04

### ✨ 新增功能
- **引用段落（Quote）支持**：添加 `{"type": "quote", "texts": [...]}` 段落类型
  - 支持在引用段落中使用所有富文本格式（加粗、高亮、链接）
  - 适用于突出重要信息、引用他人观点等场景
- **内链笔记（Note）支持**：添加 `{"type": "note", "note_id": "笔记ID"}` 段落类型
  - 用于引用其他笔记，创建笔记间的关联
  - 支持构建知识网络和关联文档
- **完整的API支持**：`create_note` 和 `edit_note` 工具均支持新的段落类型

### 📚 文档更新
- 更新 README.md，添加新功能的详细说明和示例
- 新增 `examples/create_note/demo_new_features.md` 演示文档
- 更新工具描述，包含完整的段落类型说明
- 新增常见问题解答（FAQ）关于新功能的使用

### 🧪 测试改进
- 添加 `examples/test_new_features.py` 测试脚本
- 包含所有新功能的实际使用示例
- 验证API格式映射的正确性

### 🔧 技术改进
- 优化 `NoteAtomBuilder` 类，完善构建器模式
- 增强 `validate_rich_note_paragraphs()` 函数，支持新段落类型验证
- 改进错误处理和用户提示信息

## [v1.0.0] - 2024-12-01

### 🎉 首次发布
- **MCP服务器基础功能**：基于 MCP 1.9.1 协议的完整实现
- **笔记创建功能**：统一的富文本格式接口
- **笔记编辑功能**：完全替换笔记内容
- **隐私设置功能**：支持公开、私有、规则公开三种模式
- **API密钥管理**：重置密钥功能
- **富文本支持**：加粗、高亮、链接等格式
- **标签支持**：创建笔记时可添加标签
- **完整文档**：包含安装、配置、使用说明

---

## 版本命名规范

本项目遵循 [语义化版本控制](https://semver.org/lang/zh-CN/) 规范：

- **主版本号**：不兼容的API修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

## 贡献指南

欢迎提交 Issue 和 Pull Request！在提交前请确保：

1. 代码符合项目规范
2. 添加相应的测试用例
3. 更新相关文档
4. 在本文件中记录变更 